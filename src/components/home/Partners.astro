---
// Tools
import type { Lang } from "@/i18n/defaultLangOptions";

// Compositions
import Center from "../compositions/Center.astro";
import Row from "../compositions/Row.astro";
import Stack from "../compositions/Stack.astro";

// Components
import Button from "../ui/Button.astro";
import Heading from "../ui/Heading.astro";
import Text from "../ui/Text.astro";
import Section from "../ui/Section.astro";
import Marquee from "../ui/Marquee.astro";
import EmptyShape from "../ui/EmptyShape.astro";
import Shape from "../ui/Shape.astro";
import MyIcon from "../ui/MyIcon.astro";
import MyPicture from "../ui/MyPicture.astro";

// Assets
import chernigivMonumentalism from "@/assets/images/chernigiv-monumentalism.png";
import chernigivPatrolPolice from "@/assets/images/chernigiv-patrol-police.png";
import repairTogether from "@/assets/images/logo-repair-together.png";

// Data
import { partnersData, buttonsData } from "@/data/siteData";

const currentLocale = Astro.currentLocale as Lang;
const partners = partnersData[currentLocale];
const buttons = buttonsData[currentLocale];
---

<Section class="partners">
  <Center
    maxWidth="87.5rem"
    space={{ default: "space-6", tablet: "space-7", laptop: "space-9" }}
  >
    <div class="inner">
      <EmptyShape class="partners-shape" top="-1px" left="-1px">
        <Shape color="white" class="top" translateX="100%" rotate="270deg" />
        <Shape color="white" class="bottom" translateY="100%" rotate="270deg" />
      </EmptyShape>

      <Stack space="space-10">
        <Row>
          <Stack
            space="space-6"
            class="col-12 col-start-1 tablet:col-7 tablet:col-start-5 laptop:col-6 laptop:col-start-6"
          >
            <Text
              tagName="div"
              size="large"
              class="font-medium"
              isBadge
              variant="accent">{partners.tag}</Text
            >
            <Stack space="space-5">
              <Stack space="space-4">
                <Heading
                  tagName="h3"
                  size="h5"
                  class="color-primary font-heading"
                >
                  {partners.title}
                </Heading>
                <Text tagName="p" size="large" class="color-accent"
                  >{partners.text}
                </Text>
              </Stack>
              <Button
                style="primary"
                data-open-partnership
                aria-label="Open cooperation form modal"
                >{buttons.contact}
              </Button>
            </Stack>
          </Stack>
        </Row>

        <Stack space="space-8">
          <Marquee direction="left" space="space-4" duration="slow">
            <div class="partner-logos marquee-inner">
              <div class="partner-logo">
                <MyIcon name="partners-sendpulse" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-ahalar" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-dmch" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-tolocar" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-u-cycle" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-chernigiv-it" />
              </div>

              <div class="partner-logo">
                <MyPicture
                  src={chernigivMonumentalism}
                  width={300}
                  alt="Chernigiv Monumentalism logo"
                />
              </div>

              <div class="partner-logo">
                <MyPicture
                  src={repairTogether}
                  width={300}
                  alt="Repair Together logo"
                />
              </div>
            </div>
          </Marquee>
          <Marquee direction="right" space="space-4" duration="slow">
            <div class="partner-logos marquee-inner">
              <div class="partner-logo">
                <MyIcon name="partners-ostriv" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-politehnika" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-uma" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-zelenew" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-ecovisio" />
              </div>

              <div class="partner-logo">
                <MyIcon name="partners-plato" />
              </div>

              <div class="partner-logo">
                <MyPicture
                  src={chernigivPatrolPolice}
                  width={300}
                  alt="Chernigiv Patrol Police logo"
                />
              </div>
            </div>
          </Marquee>
        </Stack>
      </Stack>
    </div>
  </Center>
</Section>

<style>
  @import "@styles/04-utilities/breakpoints.css";

  .partners {
    & button {
      align-self: flex-start;
    }
  }

  .partners .inner {
    position: relative;

    --_border-radius: var(--rounded-2xl);

    padding-block: var(--space-11-fixed);
    padding-inline: var(--space-6-fixed);

    background-color: var(--color-secondary);

    border-radius: var(--_border-radius);

    @media (--laptop-and-up) {
      --_border-radius: var(--rounded-3xl);

      padding-block: var(--space-12-fixed);
    }
  }

  .partners-shape {
    height: 3rem;
    width: 31%;
    background-color: var(--color-white);

    border-bottom-right-radius: var(--_border-radius);

    & .shape.top {
      top: -1px;
      right: 1px;
    }
    & .shape.bottom {
      bottom: 1px;
      left: -1px;
    }

    @media (--tablet-and-up) {
      height: 4rem;
      width: 25%;
    }

    @media (--laptop-and-up) {
      height: 5rem;
      width: 19%;
    }
  }

  .partner-logos {
    color: var(--color-accent);

    & :global(svg) {
      width: 100%;
      height: 100%;
      fill: currentColor;
    }
  }

  .partner-logo {
    width: 160px;
    height: 40px;

    display: flex;
    align-items: center;
    justify-content: center;

    & :global(img),
    & :global(picture) {
      object-fit: contain;
    }

    @media (--tablet-and-up) {
      width: 300px;
      height: 64px;
    }

    /* padding-block: var(--space-5-fixed); */
  }

  .red {
    border: 1px solid red;
  }
</style>
